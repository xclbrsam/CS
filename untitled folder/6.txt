Step 1️⃣ – Create User (Login as SYSDBA first)

-- Login as SYSDBA
-- SQL> connect sys as sysdba
-- Enter password: svit

-- Create user
CREATE USER C##Computer IDENTIFIED BY svit;

-- Grant privileges
GRANT ALL PRIVILEGES TO C##Computer;
GRANT CONNECT TO C##Computer;
GRANT CREATE SESSION TO C##Computer;
GRANT CREATE TABLE TO C##Computer;
GRANT UNLIMITED TABLESPACE TO C##Computer;
GRANT CREATE VIEW, CREATE PROCEDURE, CREATE SEQUENCE, CREATE TRIGGER TO C##Computer;
GRANT ALTER ANY TABLE TO C##Computer;
GRANT ALTER ANY PROCEDURE TO C##Computer;
GRANT ALTER ANY TRIGGER TO C##Computer;
GRANT DELETE ANY TABLE TO C##Computer;
GRANT DROP ANY PROCEDURE TO C##Computer;
GRANT DROP ANY TRIGGER TO C##Computer;
GRANT DROP ANY VIEW TO C##Computer;


Step 2️⃣ – Login as the created user
-- Exit and log in again
-- SQL> connect C##Computer/svit;


Step 3️⃣ – Create Library and Audit Tables
CREATE TABLE library (
    bno NUMBER(5),
    bname VARCHAR2(20),
    author VARCHAR2(20),
    allowed_days NUMBER(5)
);

-- Insert sample data
INSERT INTO library VALUES (1, 'QWE', 'poi', 10);
INSERT INTO library VALUES (2, 'ASD', 'lkj', 15);
INSERT INTO library VALUES (3, 'ZXC', 'mnb', 10);

-- Check data
SELECT * FROM library;

-- Create audit table
CREATE TABLE library_audit (
    bno NUMBER(5),
    old_all_days NUMBER(5),
    new_all_days NUMBER(5)
);



Step 4️⃣ – Create the Trigger
CREATE OR REPLACE TRIGGER Sample
BEFORE UPDATE OR DELETE ON library
FOR EACH ROW
BEGIN
    INSERT INTO library_audit VALUES (:OLD.bno, :OLD.allowed_days, :NEW.allowed_days);
END;
/


Step 5️⃣ – Test the Trigger
-- Update record
UPDATE library SET allowed_days = 15 WHERE bno = 1;

-- Delete record (optional test)
-- DELETE FROM library WHERE bno = 3;

-- Check audit table
SELECT * FROM library_audit;

